import{__assign as r}from"../../_virtual/_tslib.js";import{jsxs as e,jsx as o}from"theme-ui/jsx-runtime";import{get as a}from"theme-ui";import{forwardRef as n,useRef as t,useImperativeHandle as l,useMemo as i,useCallback as c}from"react";import s from"../Button/Button.js";import u from"../Spinner/Spinner.js";import d from"../Icon/Icon.js";var p=n((function(n,p){var v=n.value,m=n.defaultValue,f=n.onChange,x=n.status,g=n.helperText,b=void 0===g?"":g,h=n.onSave,C=n.saveOnBlur,y=void 0!==C&&C,k=n.resetOnBlur,I=void 0===k||k,j=n.className,w=t(null),z=t(null);l(p,(function(){return z.current}));var B=i((function(){return x||"default"}),[x]),N={active:{borderColor:"secondary",boxShadow:function(r){return"0px 0px 0px 4px ".concat(a(r,"colors.secondary.alpha.90"))},backgroundColor:"#FFF"}},T=c((function(r,e){var o=Object.create(e);o.type="change",o.target=z.current,o.currentTarget=z.current,z.current&&(z.current.value=m),null==f||f(o)}),[m,f]);return e("div",{sx:r({borderRadius:2},{default:{},loading:{},success:{backgroundColor:"success.alpha.95"},error:{backgroundColor:"primary.alpha.95"}}[B]),className:j,children:[e("div",{ref:w,sx:r(r(r({display:"flex",width:"100%",alignItems:"center",gap:2,paddingY:1,paddingX:3,backgroundColor:"transparent",outline:0,borderRadius:2,border:"2px solid transparent"},"loading"===B?N.active:{}),{default:{},loading:{},success:{borderColor:"success"},error:{borderColor:"primary"}}[B]),{transition:"all 0.2s","&:hover":r({},"default"===B&&{backgroundColor:"text.alpha.95"}),"&:focus-within":r({},N.active)}),onBlur:function(r){var e,o;"loading"!==B&&((null===(e=w.current)||void 0===e?void 0:e.contains(r.target))&&(null===(o=w.current)||void 0===o?void 0:o.contains(r.relatedTarget))||(y?v!==m&&(null==h||h(v)):I&&T(m,r)))},children:[o("input",{type:"text",ref:z,value:f?v:void 0,defaultValue:f?void 0:v,placeholder:m,onChange:f,disabled:"loading"===x,"aria-invalid":"error"===x,size:1,sx:{width:"100%",flexGrow:1,outline:0,backgroundColor:"transparent",border:"none",p:0,py:"2px",color:"text",variant:"text.body1"}}),{default:"",error:o(d,{name:"IconAlertCircle",size:16,sx:{color:"primary"}}),loading:o(u,{}),success:o(d,{name:"IconCircleCheck",size:16,sx:{color:"success"}})}[B],v!==m&&e("div",{sx:{display:"flex",gap:1},className:"editable-text-actions",children:[o(s,{size:"small",color:"text",iconName:"IconX","aria-label":"reset",onClick:function(r){T(m,r);var e=r.currentTarget;setTimeout((function(){return e.blur()}))}}),o(s,{size:"small",color:"text",iconName:"IconCheck","aria-label":"save",onClick:function(){return null==h?void 0:h(v)}})]})]}),b&&o("div",{sx:r({px:3,py:2,variant:"text.body1"},{default:{},loading:{},success:{color:"success"},error:{color:"primary"}}[B]),children:b})]})}));export{p as default};
//# sourceMappingURL=EditableText.js.map
