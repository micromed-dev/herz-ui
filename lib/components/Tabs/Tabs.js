import{__assign as r}from"../../_virtual/_tslib.js";import{jsx as t,jsxs as n}from"theme-ui/jsx-runtime";import e,{useState as i,useCallback as o,useMemo as l,useRef as a}from"react";import{useThemeUI as c}from"theme-ui";import{TabContext as d,useTabContext as p}from"./context.js";import{useMeasure as s}from"react-use";var u=function(r){var l=r.children,a=r.className,c=r.initialOpenIndex,p=i(c),s=p[0],u=p[1],f=o((function(r){u(s===r?void 0:r)}),[s]),x=e.Children.toArray(l).filter((function(r){return e.isValidElement(r)})).map((function(r,n,e){var i="",o="";if(void 0!==r.props.title){var l=r.props.title;i="".concat(l,"-tab"),o="".concat(l,"-content-panel")}else{l=e[r.props.index].props.title;i="".concat(l,"-tab"),o="".concat(l,"-content-panel")}return t(d.Provider,{value:{index:n,openIndex:s,panelId:o,tabId:i,toggleOpen:f},children:r},n)})),h=x.filter((function(r){return r.props.children.props.hasOwnProperty("title")})),m=x.filter((function(r){return r.props.children.props.hasOwnProperty("index")}));return n("div",{className:a,children:[t("header",{sx:{display:"flex",flexDirection:"row",flexWrap:"nowrap"},children:h.map((function(r){return r}))}),m.map((function(r){return r}))]})},f=18.53,x=6.5;u.Tab=function(e){var i,d,u,h,m=e.title,v=p(),b=v.index,g=v.openIndex,y=v.panelId,I=v.tabId,w=v.toggleOpen,k=l((function(){return 0===b}),[b]),C=l((function(){return g===b}),[b,g]),P=c().theme,z=s(),O=z[0],R=z[1].width,S=a(null),j=l((function(){return k?R+12+f+x:R+37.06+12}),[k,R]),N=l((function(){return k?"m 0.5 36 l 0 -27 c 0 -4 2 -8 6.53 -8 l ".concat(j-f-x," 0 c 4.47 0 6.47 4 6.47 8 l 0 17 c 0 5 5 10 12 10"):"m 0 36 c 8 -1 12 -6 12 -12 l 0 -15 c 0 -4 2 -8 6.53 -8 l ".concat(j-37.06," 0 c 4.47 0 6.47 4 6.47 8 l 0 17 c 0 5 5 10 12 10")}),[j,k]),T=l((function(){return k?"m 2.97 3.3 l ".concat(j-f-x+8.12," 0 c 0 -1 -2.59 -2 -4.06 -2 l -").concat(j-f-x," 0 c -1.53 0 -3.53 1 -4.06 2 z"):"m 14.47 3.3 l ".concat(j-37.06+8.12," 0 c 0 -1 -2.59 -2 -4.06 -2 l -").concat(j-37.06," 0 c -1.53 0 -3.53 1 -4.06 2 z")}),[j,k]),W=o((function(r){var t;"Space"===r.code&&g!==b&&(w(b),null===(t=S.current)||void 0===t||t.blur())}),[b,g,w]),_=o((function(){var r;g!==b&&(w(b),null===(r=S.current)||void 0===r||r.blur())}),[b,g,w]),A=l((function(){return C?{"& > svg > path:first-of-type":{fill:"text.95"}}:{"& > span":{backgroundColor:"text.95",borderRadius:1,color:"text",padding:1}}}),[C]);return n("div",{"aria-controls":y,"aria-selected":g===b,id:I,onClick:_,onKeyPress:W,ref:S,sx:{cursor:"pointer",display:"grid",height:36,mb:"-1px",role:"tab","&:focus":r({outline:"none"},A),"&:hover":r({},A)},tabIndex:0,children:[n("svg",{"aria-disabled":"false","aria-expanded":C,height:36,role:"button",sx:{cursor:"pointer",mb:"-0.8px",gridColumn:1,gridRow:1,zIndex:1},width:j,children:[t("path",{d:N,fill:C?"#ffffff":"transparent",stroke:C?null===(d=null===(i=P.colors)||void 0===i?void 0:i.text)||void 0===d?void 0:d[90]:"transparent",strokeWidth:1,sx:{transition:"all 0.15s cubic-bezier(0.16, 1, 0.3, 1)",transitionProperty:"fill, stroke"}}),t("path",{d:T,fill:C?null===(h=null===(u=P.colors)||void 0===u?void 0:u.primary)||void 0===h?void 0:h[0]:"transparent",sx:{transition:"all 0.15s cubic-bezier(0.16, 1, 0.3, 1)",transitionProperty:"fill, stroke"}})]}),t("span",{ref:O,sx:{alignSelf:"center",color:C?"text":"text.40",gridColumn:1,gridRow:1,justifySelf:"center",mr:0===b?12.030000000000001:void 0,variant:"text.heading4",width:"fit-content",zIndex:2},children:m})]})},u.Panel=function(r){var n=r.children,e=r.index,i=p(),o=i.openIndex,l=i.panelId,a=i.tabId,c=o===e;return t("section",{"aria-labelledby":a,id:l,role:"tabpanel",children:c&&t("div",{id:e.toString(),sx:{display:"block",position:"relative",py:5,px:6,borderRadius:3,borderTopLeftRadius:0==o&&c?0:3,border:"1px solid",borderColor:"text.90",backgroundColor:"text.95",boxShadow:c?"main":"none"},children:n})})};export{u as default};
//# sourceMappingURL=Tabs.js.map
