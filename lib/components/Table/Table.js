import{__assign as e,__spreadArray as t,__rest as o}from"../../_virtual/_tslib.js";import{jsxs as i,jsx as r}from"theme-ui/jsx-runtime";import{createElement as n,get as a}from"theme-ui";import{useTable as l,useSortBy as d,usePagination as s,useFlexLayout as c}from"react-table";import"../Accordion/Accordion.js";import u from"../Icon/Icon.js";import{memo as p,useMemo as m,useEffect as f}from"react";import"downshift";import"tippy.js";import"react-dom";import"@tippyjs/react";import x from"../Checkbox/Checkbox.js";import"../DateSelect/DateSelect.js";import"../DesktopModal/DesktopModal.js";import"../EditableField/Group/EditableFieldGroup.js";import"../EditableField/Select/EditableFieldSelect.js";import"../LinearProgress/LinearProgress.js";import"../MobileModal/MobileModal.js";import g from"../Pagination/Pagination.js";import"../Radio/Radio.js";import h from"../Select/Select.js";import v from"../Skeleton/Skeleton.js";import"../SubNavigationMenu/SubNavigationMenu.js";import y from"./useRowSelection.js";import"../TableFilters/TableFilters.js";import"../Tabs/Tabs.js";import"react/jsx-runtime";import"../../theme/theme.js";import"react-dropzone";import"../ValuesList/ValuesList.js";var b="INTERNAL_SELECTION_COLUMN_ID",w="INTERNAL_ACTIVE_COLUMN_ID";function C(p){var C=p.columns,k=p.data,S=p.loading,j=p.rowClickable,I=void 0!==j&&j,R=p.onRowClick,P=p.activeRowIds,T=p.rowsSelectable,N=void 0!==T&&T,B=p.selectedRowIds,M=p.onRowSelectionChange,L=p.manualSorting,z=void 0!==L&&L,E=p.initialSortBy,W=p.manualPagination,A=void 0!==W&&W,D=p.pageCount,F=p.totalCount,G=void 0===F?k.length:F,O=p.initialPageSize,_=void 0===O?10:O,V=p.initialPageIndex,H=void 0===V?0:V,U=p.infiniteScroll,q=p.onTableChange,K=p.className,J=p.style,Q=p.uniqueFieldKey,X=void 0===Q?"id":Q,Y=y({selectedRowIds:B,onChange:M}),Z=Y.selectedRowIds,$=Y.setRowsSelected,ee=Y.toggleRowSelected,te=m((function(){return Array.from({length:_}).fill("").map((function(e,t){var o;return(o={})[X]="".concat(t),o}))}),[_,X]),oe=l(e(e({columns:C,data:S?te:k,manualSortBy:z,manualPagination:A,autoResetPage:!1,autoResetSortBy:!1,autoResetFilters:!1},D?{pageCount:D}:{}),{initialState:e({pageSize:_,pageIndex:H},E?{sortBy:[E]}:{}),getRowId:function(e,t){return(null==e?void 0:e[X])?"".concat(null==e?void 0:e[X]):"".concat(t)}}),d,s,c,(function(e){e.visibleColumns.push((function(e){var o={id:b,width:48,fixedWidth:!0},i={id:w,width:80,fixedWidth:!0},r=t([],e,!0);return N&&(r=t([o],r,!0)),P&&Object.keys(P).length>0&&(r=t(t([],r,!0),[i],!1)),r}))})),ie=oe.getTableBodyProps,re=oe.getTableProps,ne=oe.headerGroups,ae=oe.page,le=oe.prepareRow,de=oe.pageCount,se=oe.gotoPage,ce=oe.setPageSize,ue=oe.state,pe=ue.pageIndex,me=ue.pageSize,fe=ue.sortBy;f((function(){null==q||q({pageIndex:pe,pageSize:me,sortBy:null==fe?void 0:fe[0]})}),[q,pe,me,fe]);var xe=m((function(){return A?G:k.length}),[A,G,k]),ge=m((function(){return!ae.some((function(e){return!Z[e.id]}))}),[ae,Z]),he=m((function(){return ae.some((function(e){return Z[e.id]}))}),[ae,Z]);return i("div",e({},re(),{sx:{display:"grid",gridTemplateRows:"minmax(0, 1fr) auto",overflow:"auto",width:"100%",backgroundColor:"#fff"},className:K,style:J,children:[i("div",{sx:{overflow:"auto",backgroundColor:"inherit"},children:[r("div",{sx:{minWidth:"fit-content",position:"sticky",top:0,backgroundColor:"inherit",zIndex:1},children:ne.map((function(t){var l=t.getHeaderGroupProps(),d=l.key,s=o(l,["key"]);return i("div",{sx:{display:"grid",gridTemplateColumns:"1fr auto"},children:[n("div",e({},s,{key:d,sx:{borderBottom:function(e){return"1px solid ".concat(a(e,"colors.text.90"))},px:2}}),t.headers.map((function(t){var a=t.getHeaderProps(t.getSortByToggleProps()),l=a.key,d=a.style,s=o(a,["key","style"]);return n("div",e({},s,{key:l,sx:e(e({display:"flex",alignItems:"center",pl:7,pb:3,color:t.isSorted?"text":"text.40",variant:t.isSorted?"text.heading3":"text.body1"},d),t.fixedWidth?{flexGrow:0}:{})}),t.id===b?r(x,{checked:ge,indeterminate:!ge&&he,onChange:function(){return $(ae.map((function(e){return e.id})),!ge)},"aria-label":ge?"unselect all rows":"select all rows"}):i("div",{sx:{display:"flex",alignItems:"center",gap:1,flexGrow:1,justifyContent:{start:"flex-start",end:"flex-end",center:"center"}[t.align||"start"]},children:[t.render("Header"),t.isSorted?t.isSortedDesc?r(u,{name:"IconArrowNarrowDown",size:16,sx:{color:"text"}}):r(u,{name:"IconArrowNarrowUp",size:16,sx:{color:"text"}}):""]}))}))),P&&r("div",{sx:{width:4,borderBottom:function(e){return"1px solid ".concat(a(e,"colors.text.90"))}}})]},d)}))}),r("div",e({},ie(),{children:ae.map((function(t){le(t);var l=t.getRowProps(),d=l.key,s=o(l,["key"]);return i("div",{sx:{display:"grid",gridTemplateColumns:"1fr auto"},children:[r("div",{sx:{p:0,minWidth:"fit-content",borderBottom:function(e){return"1px solid ".concat(a(e,"colors.text.90"))},transition:"all 0.2s",backgroundColor:Z[t.id]?"#fafafa":"transparent"},children:r("div",e({},s,{onClick:function(){I&&(null==R||R(t.original))},sx:{p:2,borderRadius:0,transition:"all 0.2s",cursor:I?"pointer":"auto","&:hover":{"*":{fontWeight:"semibold"},backgroundColor:Z[t.id]?"transparent":"#fafafa"}},children:t.cells.map((function(i,a){var l=i.getCellProps(),d=l.key,s=l.style,c=o(l,["key","style"]);return i.column.id===w?n("div",e({},c,{key:d,sx:e(e({display:"flex",justifyContent:"flex-end",alignItems:"center",color:"secondary",pl:7,pr:7},s),i.column.fixedWidth?{flexGrow:0}:{})})):n("div",e({},c,{key:d,sx:e(e({display:"flex",pl:7,py:2,color:i.column.highlight?"secondary":"text",variant:"text.body1",justifyContent:{start:"flex-start",end:"flex-end",center:"center"}[i.column.align||"start"],alignItems:"center",fontWeight:(null==P?void 0:P[t.id])?"semibold":"medium",wordBreak:"break-all"},s),i.column.fixedWidth?{flexGrow:0}:{})}),function(){var e;if(i.column.id===b)return r("div",{sx:{display:"flex"},onClick:function(e){return e.stopPropagation()},children:r(x,{checked:!!Z[t.id],onChange:function(){return ee(t.id)},"aria-label":"select row ".concat(t.id)})});var o=null===(e=C[a])||void 0===e?void 0:e.Loader;return S?o?o():r(v,{variant:"text",width:"100%"}):i.render("Cell")}())}))}))}),P&&r("div",{sx:e({width:4,borderBottom:function(e){return"1px solid ".concat(a(e,"colors.text.90"))}},P[t.id]?{backgroundColor:"primary",boxShadow:function(e){return"0px 1px 12px ".concat(a(e,"colors.primary.alpha.70"))},borderRadius:"4px 0px 0px 4px"}:{})})]},d)}))}))]}),!U&&i("div",{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:8,pt:6},children:[i("div",{sx:{display:"flex",gap:2,alignItems:"center",variant:"text.body1",color:"text.40"},children:[r("span",{children:"Mostrando"}),r("div",{sx:{flexShrink:0},children:i(h,{value:me,defaultValue:_,onChange:function(e){var t;e&&ce(Number.parseInt(null!==(t=e.toString())&&void 0!==t?t:"10"))},children:[r(h.Option,{value:5,children:"5"}),r(h.Option,{value:10,children:"10"}),r(h.Option,{value:25,children:"25"}),r(h.Option,{value:50,children:"50"})]})}),i("span",{children:["itens por p√°gina de um total de"," ",xe||r(v,{sx:{display:"inline-flex"},variant:"text",width:36})," ","resultados"]})]}),r(g,{page:pe+1,count:de,onChange:function(e){return se(e-1)}})]})]}))}var k=p(C);export{k as default};
//# sourceMappingURL=Table.js.map
